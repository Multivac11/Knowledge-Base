import{E as D,x as _,h as V,D as N,f as w}from"./chunk.vendor_entities.js";import{f as y}from"./chunk.vendor_domhandler.js";var a;(function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"})(a||(a={}));var s;(function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.BeforeSpecialT=23]="BeforeSpecialT",e[e.SpecialStartSequence=24]="SpecialStartSequence",e[e.InSpecialTag=25]="InSpecialTag",e[e.InEntity=26]="InEntity"})(s||(s={}));function m(e){return e===a.Space||e===a.NewLine||e===a.Tab||e===a.FormFeed||e===a.CarriageReturn}function A(e){return e===a.Slash||e===a.Gt||m(e)}function L(e){return e>=a.LowerA&&e<=a.LowerZ||e>=a.UpperA&&e<=a.UpperZ}var b;(function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"})(b||(b={}));const l={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97]),XmpEnd:new Uint8Array([60,47,120,109,112])};class M{constructor({xmlMode:t=!1,decodeEntities:i=!0},n){this.cbs=n,this.state=s.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=s.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=t,this.decodeEntities=i,this.entityDecoder=new D(t?_:V,(r,o)=>this.emitCodePoint(r,o))}reset(){this.state=s.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=s.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(t){this.offset+=this.buffer.length,this.buffer=t,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(t){t===a.Lt||!this.decodeEntities&&this.fastForwardTo(a.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=s.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&t===a.Amp&&this.startEntity()}stateSpecialStartSequence(t){const i=this.sequenceIndex===this.currentSequence.length;if(!(i?A(t):(t|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!i){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=s.InTagName,this.stateInTagName(t)}stateInSpecialTag(t){if(this.sequenceIndex===this.currentSequence.length){if(t===a.Gt||m(t)){const i=this.index-this.currentSequence.length;if(this.sectionStart<i){const n=this.index;this.index=i,this.cbs.ontext(this.sectionStart,i),this.index=n}this.isSpecial=!1,this.sectionStart=i+2,this.stateInClosingTagName(t);return}this.sequenceIndex=0}(t|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===l.TitleEnd?this.decodeEntities&&t===a.Amp&&this.startEntity():this.fastForwardTo(a.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(t===a.Lt)}stateCDATASequence(t){t===l.Cdata[this.sequenceIndex]?++this.sequenceIndex===l.Cdata.length&&(this.state=s.InCommentLike,this.currentSequence=l.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=s.InDeclaration,this.stateInDeclaration(t))}fastForwardTo(t){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===t)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(t){t===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===l.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=s.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):t!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(t){return this.xmlMode?!A(t):L(t)}startSpecial(t,i){this.isSpecial=!0,this.currentSequence=t,this.sequenceIndex=i,this.state=s.SpecialStartSequence}stateBeforeTagName(t){if(t===a.ExclamationMark)this.state=s.BeforeDeclaration,this.sectionStart=this.index+1;else if(t===a.Questionmark)this.state=s.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(t)){const i=t|32;this.sectionStart=this.index,this.xmlMode?this.state=s.InTagName:i===l.ScriptEnd[2]?this.state=s.BeforeSpecialS:i===l.TitleEnd[2]||i===l.XmpEnd[2]?this.state=s.BeforeSpecialT:this.state=s.InTagName}else t===a.Slash?this.state=s.BeforeClosingTagName:(this.state=s.Text,this.stateText(t))}stateInTagName(t){A(t)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=s.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateBeforeClosingTagName(t){m(t)||(t===a.Gt?this.state=s.Text:(this.state=this.isTagStartChar(t)?s.InClosingTagName:s.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(t){(t===a.Gt||m(t))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=s.AfterClosingTagName,this.stateAfterClosingTagName(t))}stateAfterClosingTagName(t){(t===a.Gt||this.fastForwardTo(a.Gt))&&(this.state=s.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(t){t===a.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=s.InSpecialTag,this.sequenceIndex=0):this.state=s.Text,this.sectionStart=this.index+1):t===a.Slash?this.state=s.InSelfClosingTag:m(t)||(this.state=s.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(t){t===a.Gt?(this.cbs.onselfclosingtag(this.index),this.state=s.Text,this.sectionStart=this.index+1,this.isSpecial=!1):m(t)||(this.state=s.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateInAttributeName(t){(t===a.Eq||A(t))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=s.AfterAttributeName,this.stateAfterAttributeName(t))}stateAfterAttributeName(t){t===a.Eq?this.state=s.BeforeAttributeValue:t===a.Slash||t===a.Gt?(this.cbs.onattribend(b.NoValue,this.sectionStart),this.sectionStart=-1,this.state=s.BeforeAttributeName,this.stateBeforeAttributeName(t)):m(t)||(this.cbs.onattribend(b.NoValue,this.sectionStart),this.state=s.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(t){t===a.DoubleQuote?(this.state=s.InAttributeValueDq,this.sectionStart=this.index+1):t===a.SingleQuote?(this.state=s.InAttributeValueSq,this.sectionStart=this.index+1):m(t)||(this.sectionStart=this.index,this.state=s.InAttributeValueNq,this.stateInAttributeValueNoQuotes(t))}handleInAttributeValue(t,i){t===i||!this.decodeEntities&&this.fastForwardTo(i)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(i===a.DoubleQuote?b.Double:b.Single,this.index+1),this.state=s.BeforeAttributeName):this.decodeEntities&&t===a.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(t){this.handleInAttributeValue(t,a.DoubleQuote)}stateInAttributeValueSingleQuotes(t){this.handleInAttributeValue(t,a.SingleQuote)}stateInAttributeValueNoQuotes(t){m(t)||t===a.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(b.Unquoted,this.index),this.state=s.BeforeAttributeName,this.stateBeforeAttributeName(t)):this.decodeEntities&&t===a.Amp&&this.startEntity()}stateBeforeDeclaration(t){t===a.OpeningSquareBracket?(this.state=s.CDATASequence,this.sequenceIndex=0):this.state=t===a.Dash?s.BeforeComment:s.InDeclaration}stateInDeclaration(t){(t===a.Gt||this.fastForwardTo(a.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=s.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(t){(t===a.Gt||this.fastForwardTo(a.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=s.Text,this.sectionStart=this.index+1)}stateBeforeComment(t){t===a.Dash?(this.state=s.InCommentLike,this.currentSequence=l.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=s.InDeclaration}stateInSpecialComment(t){(t===a.Gt||this.fastForwardTo(a.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=s.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(t){const i=t|32;i===l.ScriptEnd[3]?this.startSpecial(l.ScriptEnd,4):i===l.StyleEnd[3]?this.startSpecial(l.StyleEnd,4):(this.state=s.InTagName,this.stateInTagName(t))}stateBeforeSpecialT(t){switch(t|32){case l.TitleEnd[3]:{this.startSpecial(l.TitleEnd,4);break}case l.TextareaEnd[3]:{this.startSpecial(l.TextareaEnd,4);break}case l.XmpEnd[3]:{this.startSpecial(l.XmpEnd,4);break}default:this.state=s.InTagName,this.stateInTagName(t)}}startEntity(){this.baseState=this.state,this.state=s.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?N.Strict:this.baseState===s.Text||this.baseState===s.InSpecialTag?N.Legacy:N.Attribute)}stateInEntity(){const t=this.entityDecoder.write(this.buffer,this.index-this.offset);t>=0?(this.state=this.baseState,t===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===s.Text||this.state===s.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===s.InAttributeValueDq||this.state===s.InAttributeValueSq||this.state===s.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const t=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case s.Text:{this.stateText(t);break}case s.SpecialStartSequence:{this.stateSpecialStartSequence(t);break}case s.InSpecialTag:{this.stateInSpecialTag(t);break}case s.CDATASequence:{this.stateCDATASequence(t);break}case s.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(t);break}case s.InAttributeName:{this.stateInAttributeName(t);break}case s.InCommentLike:{this.stateInCommentLike(t);break}case s.InSpecialComment:{this.stateInSpecialComment(t);break}case s.BeforeAttributeName:{this.stateBeforeAttributeName(t);break}case s.InTagName:{this.stateInTagName(t);break}case s.InClosingTagName:{this.stateInClosingTagName(t);break}case s.BeforeTagName:{this.stateBeforeTagName(t);break}case s.AfterAttributeName:{this.stateAfterAttributeName(t);break}case s.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(t);break}case s.BeforeAttributeValue:{this.stateBeforeAttributeValue(t);break}case s.BeforeClosingTagName:{this.stateBeforeClosingTagName(t);break}case s.AfterClosingTagName:{this.stateAfterClosingTagName(t);break}case s.BeforeSpecialS:{this.stateBeforeSpecialS(t);break}case s.BeforeSpecialT:{this.stateBeforeSpecialT(t);break}case s.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(t);break}case s.InSelfClosingTag:{this.stateInSelfClosingTag(t);break}case s.InDeclaration:{this.stateInDeclaration(t);break}case s.BeforeDeclaration:{this.stateBeforeDeclaration(t);break}case s.BeforeComment:{this.stateBeforeComment(t);break}case s.InProcessingInstruction:{this.stateInProcessingInstruction(t);break}case s.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){this.state===s.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const t=this.buffer.length+this.offset;this.sectionStart>=t||(this.state===s.InCommentLike?this.currentSequence===l.CdataEnd?this.cbs.oncdata(this.sectionStart,t,0):this.cbs.oncomment(this.sectionStart,t,0):this.state===s.InTagName||this.state===s.BeforeAttributeName||this.state===s.BeforeAttributeValue||this.state===s.AfterAttributeName||this.state===s.InAttributeName||this.state===s.InAttributeValueSq||this.state===s.InAttributeValueDq||this.state===s.InAttributeValueNq||this.state===s.InClosingTagName||this.cbs.ontext(this.sectionStart,t))}emitCodePoint(t,i){this.baseState!==s.Text&&this.baseState!==s.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+i,this.index=this.sectionStart-1,this.cbs.onattribentity(t)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+i,this.index=this.sectionStart-1,this.cbs.ontextentity(t,this.sectionStart))}}const p=new Set(["input","option","optgroup","select","button","datalist","textarea"]),h=new Set(["p"]),q=new Set(["thead","tbody"]),v=new Set(["dd","dt"]),k=new Set(["rt","rp"]),O=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",h],["h1",h],["h2",h],["h3",h],["h4",h],["h5",h],["h6",h],["select",p],["input",p],["output",p],["button",p],["datalist",p],["textarea",p],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",v],["dt",v],["address",h],["article",h],["aside",h],["blockquote",h],["details",h],["div",h],["dl",h],["fieldset",h],["figcaption",h],["figure",h],["footer",h],["form",h],["header",h],["hr",h],["main",h],["nav",h],["ol",h],["pre",h],["section",h],["table",h],["ul",h],["rt",k],["rp",k],["tbody",q],["tfoot",q]]),F=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),E=new Set(["math","svg"]),B=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),U=/\s|\//;class G{constructor(t,i={}){var n,r,o,c,u,d;this.options=i,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=t??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(n=i.lowerCaseTags)!==null&&n!==void 0?n:this.htmlMode,this.lowerCaseAttributeNames=(r=i.lowerCaseAttributeNames)!==null&&r!==void 0?r:this.htmlMode,this.recognizeSelfClosing=(o=i.recognizeSelfClosing)!==null&&o!==void 0?o:!this.htmlMode,this.tokenizer=new((c=i.Tokenizer)!==null&&c!==void 0?c:M)(this.options,this),this.foreignContext=[!this.htmlMode],(d=(u=this.cbs).onparserinit)===null||d===void 0||d.call(u,this)}ontext(t,i){var n,r;const o=this.getSlice(t,i);this.endIndex=i-1,(r=(n=this.cbs).ontext)===null||r===void 0||r.call(n,o),this.startIndex=i}ontextentity(t,i){var n,r;this.endIndex=i-1,(r=(n=this.cbs).ontext)===null||r===void 0||r.call(n,w(t)),this.startIndex=i}isVoidElement(t){return this.htmlMode&&F.has(t)}onopentagname(t,i){this.endIndex=i;let n=this.getSlice(t,i);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)}emitOpenTag(t){var i,n,r,o;this.openTagStart=this.startIndex,this.tagname=t;const c=this.htmlMode&&O.get(t);if(c)for(;this.stack.length>0&&c.has(this.stack[0]);){const u=this.stack.shift();(n=(i=this.cbs).onclosetag)===null||n===void 0||n.call(i,u,!0)}this.isVoidElement(t)||(this.stack.unshift(t),this.htmlMode&&(E.has(t)?this.foreignContext.unshift(!0):B.has(t)&&this.foreignContext.unshift(!1))),(o=(r=this.cbs).onopentagname)===null||o===void 0||o.call(r,t),this.cbs.onopentag&&(this.attribs={})}endOpenTag(t){var i,n;this.startIndex=this.openTagStart,this.attribs&&((n=(i=this.cbs).onopentag)===null||n===void 0||n.call(i,this.tagname,this.attribs,t),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(t){this.endIndex=t,this.endOpenTag(!1),this.startIndex=t+1}onclosetag(t,i){var n,r,o,c,u,d,x,S;this.endIndex=i;let f=this.getSlice(t,i);if(this.lowerCaseTagNames&&(f=f.toLowerCase()),this.htmlMode&&(E.has(f)||B.has(f))&&this.foreignContext.shift(),this.isVoidElement(f))this.htmlMode&&f==="br"&&((c=(o=this.cbs).onopentagname)===null||c===void 0||c.call(o,"br"),(d=(u=this.cbs).onopentag)===null||d===void 0||d.call(u,"br",{},!0),(S=(x=this.cbs).onclosetag)===null||S===void 0||S.call(x,"br",!1));else{const I=this.stack.indexOf(f);if(I!==-1)for(let g=0;g<=I;g++){const T=this.stack.shift();(r=(n=this.cbs).onclosetag)===null||r===void 0||r.call(n,T,g!==I)}else this.htmlMode&&f==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=i+1}onselfclosingtag(t){this.endIndex=t,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=t+1):this.onopentagend(t)}closeCurrentTag(t){var i,n;const r=this.tagname;this.endOpenTag(t),this.stack[0]===r&&((n=(i=this.cbs).onclosetag)===null||n===void 0||n.call(i,r,!t),this.stack.shift())}onattribname(t,i){this.startIndex=t;const n=this.getSlice(t,i);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n}onattribdata(t,i){this.attribvalue+=this.getSlice(t,i)}onattribentity(t){this.attribvalue+=w(t)}onattribend(t,i){var n,r;this.endIndex=i,(r=(n=this.cbs).onattribute)===null||r===void 0||r.call(n,this.attribname,this.attribvalue,t===b.Double?'"':t===b.Single?"'":t===b.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(t){const i=t.search(U);let n=i<0?t:t.substr(0,i);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n}ondeclaration(t,i){this.endIndex=i;const n=this.getSlice(t,i);if(this.cbs.onprocessinginstruction){const r=this.getInstructionName(n);this.cbs.onprocessinginstruction(`!${r}`,`!${n}`)}this.startIndex=i+1}onprocessinginstruction(t,i){this.endIndex=i;const n=this.getSlice(t,i);if(this.cbs.onprocessinginstruction){const r=this.getInstructionName(n);this.cbs.onprocessinginstruction(`?${r}`,`?${n}`)}this.startIndex=i+1}oncomment(t,i,n){var r,o,c,u;this.endIndex=i,(o=(r=this.cbs).oncomment)===null||o===void 0||o.call(r,this.getSlice(t,i-n)),(u=(c=this.cbs).oncommentend)===null||u===void 0||u.call(c),this.startIndex=i+1}oncdata(t,i,n){var r,o,c,u,d,x,S,f,I,g;this.endIndex=i;const T=this.getSlice(t,i-n);!this.htmlMode||this.options.recognizeCDATA?((o=(r=this.cbs).oncdatastart)===null||o===void 0||o.call(r),(u=(c=this.cbs).ontext)===null||u===void 0||u.call(c,T),(x=(d=this.cbs).oncdataend)===null||x===void 0||x.call(d)):((f=(S=this.cbs).oncomment)===null||f===void 0||f.call(S,`[CDATA[${T}]]`),(g=(I=this.cbs).oncommentend)===null||g===void 0||g.call(I)),this.startIndex=i+1}onend(){var t,i;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let n=0;n<this.stack.length;n++)this.cbs.onclosetag(this.stack[n],!0)}(i=(t=this.cbs).onend)===null||i===void 0||i.call(t)}reset(){var t,i,n,r;(i=(t=this.cbs).onreset)===null||i===void 0||i.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(r=(n=this.cbs).onparserinit)===null||r===void 0||r.call(n,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(t){this.reset(),this.end(t)}getSlice(t,i){for(;t-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let n=this.buffers[0].slice(t-this.bufferOffset,i-this.bufferOffset);for(;i-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,i-this.bufferOffset);return n}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(t){var i,n;if(this.ended){(n=(i=this.cbs).onerror)===null||n===void 0||n.call(i,new Error(".write() after done!"));return}this.buffers.push(t),this.tokenizer.running&&(this.tokenizer.write(t),this.writeIndex++)}end(t){var i,n;if(this.ended){(n=(i=this.cbs).onerror)===null||n===void 0||n.call(i,new Error(".end() after done!"));return}t&&this.write(t),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(t){this.write(t)}done(t){this.end(t)}}function P(e,t){const i=new y(void 0,t);return new G(i,t).end(e),i.root}export{P as p};
